################################################################################
# BASES
################################################################################
set -gx XDG_CODE_HOME $HOME/dev/private
set -gx XDG_CONFIG_HOME $HOME/.config

fish_add_path -a -g ~/.local/bin

################################################################################
# TERMINAL
################################################################################
set -gx GPG_TTY $(tty)
set -gx EDITOR nvim
set -gx MANPAGER nvim +Man!

################################################################################
# K8s
################################################################################
alias kctx="kubectx"
alias kns="kubens"
alias k="kubectl"
alias kgp="kubectl get pods"
alias consul-forward="kubectl port-forward -n kv consul-server-0 8500:8500 &; sleep 2; xdg-open http://localhost:8500; fg"

################################################################################
# Elixir
################################################################################
# Enables history in IEx
set -xg ERL_AFLAGS "-kernel shell_history enabled"
# For compiling erlang
set -xg KERL_CONFIGURE_OPTIONS "--disable-debug --without-javac"
# Enable erlang docs for IEx help function
set -xg KERL_BUILD_DOCS yes

alias credo="mix credo --strict"

set -xg ELIXIR_LS_DIR $XDG_CODE_HOME/elixir-ls


################################################################################
# NOMAD
################################################################################
alias nomad='sudo salt-call state.apply'

################################################################################
# RUST
################################################################################
fish_add_path -a -g ~/.cargo/bin

################################################################################
# ASDF
################################################################################
source $XDG_CODE_HOME/asdf/asdf.fish
source $XDG_CODE_HOME/asdf/completions/asdf.fish

################################################################################
# Rust alternatives
################################################################################
alias cat="bat"
alias ll='exa -lha --group-directories-first --icons'
alias ls="exa"

################################################################################
# Zoxide
################################################################################
eval "$(zoxide init fish)"

################################################################################
# Direnv
################################################################################
eval "$(direnv hook fish)"

################################################################################
# Kitty
################################################################################
function copy_term_info_ssh
  infocmp -a xterm-kitty | ssh $argv tic -x -o \~/.terminfo /dev/stdin
end

################################################################################
# Starship
################################################################################
starship init fish | source
